<% 
  layout = 'layout';
  pageTitle = 'Settings';
  extraScripts = ['shared.js'];
%>

<!-- TABS -->
<div class="tabs">
  <button id="tab-account" class="tab active" onclick="switchSettingsTab('account')">Account</button>
  <button id="tab-preferences" class="tab" onclick="switchSettingsTab('preferences')">Preferences</button>
  <button id="tab-api" class="tab" onclick="switchSettingsTab('api')">API Keys</button>
</div>

<!-- TAB: Account -->
<div id="tab-content-account">
  <div class="card">
    <div class="card-header">
      <span class="font-medium">Account Settings</span>
    </div>
    <form id="account-form" onsubmit="saveAccountSettings(event)" class="flex flex-col gap-4">
      <div class="flex gap-4" style="flex-wrap: wrap;">
        <div class="flex flex-col gap-2 flex-1" style="min-width: 200px;">
          <label class="text-sm font-medium">Display Name</label>
          <input type="text" id="display-name" class="input" placeholder="Your name">
        </div>
        <div class="flex flex-col gap-2 flex-1" style="min-width: 200px;">
          <label class="text-sm font-medium">Email</label>
          <input type="email" id="email" class="input" placeholder="your@email.com" disabled>
        </div>
      </div>
      <div class="flex gap-4" style="flex-wrap: wrap;">
        <div class="flex flex-col gap-2 flex-1" style="min-width: 200px;">
          <label class="text-sm font-medium">New Password</label>
          <input type="password" id="new-password" class="input" placeholder="Leave blank to keep current">
        </div>
        <div class="flex flex-col gap-2 flex-1" style="min-width: 200px;">
          <label class="text-sm font-medium">Confirm Password</label>
          <input type="password" id="confirm-password" class="input" placeholder="Confirm new password">
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Save Account Settings</button>
    </form>
  </div>
</div>

<!-- TAB: Preferences -->
<div id="tab-content-preferences" style="display: none;">
  <div class="card">
    <div class="card-header">
      <span class="font-medium">System Preferences</span>
    </div>
    <form id="preferences-form" class="flex flex-col gap-4">
      <div class="flex flex-col gap-2">
        <label class="text-sm font-medium">Default Transcription Model</label>
        <select id="default-model" class="input">
          <option value="whisper-small">Whisper Small (Faster)</option>
          <option value="whisper-medium" selected>Whisper Medium (Balanced)</option>
          <option value="whisper-large">Whisper Large (Best Quality)</option>
        </select>
      </div>
      <div class="flex flex-col gap-2">
        <label class="text-sm font-medium">Default Language</label>
        <select id="default-language" class="input">
          <option value="auto" selected>Auto-detect</option>
          <option value="en">English</option>
          <option value="nl">Dutch</option>
          <option value="de">German</option>
          <option value="fr">French</option>
        </select>
      </div>
      <label class="flex items-center gap-3" style="cursor: pointer;">
        <input type="checkbox" id="auto-validate" style="width: 18px; height: 18px;">
        <span class="text-sm">Auto-validate transcriptions against documents</span>
      </label>
      <button type="submit" class="btn btn-primary" onclick="savePreferences(event)">Save Preferences</button>
    </form>
  </div>
</div>

<!-- TAB: API Keys -->
<div id="tab-content-api" style="display: none;">
  <div class="card">
    <div class="card-header">
      <span class="font-medium">API Keys</span>
    </div>
    <div class="flex flex-col gap-4">
      <div class="flex flex-col gap-2">
        <label class="text-sm font-medium">Your API Key</label>
        <div class="flex gap-2">
          <input type="text" id="api-key" class="input flex-1" readonly value="sk-brutally-abc123xyz789">
          <button class="btn btn-secondary" onclick="copyApiKey()">Copy</button>
        </div>
      </div>
      <button class="btn btn-danger" onclick="regenerateApiKey()">Regenerate API Key</button>
      <p class="text-xs text-muted">Warning: Regenerating will invalidate your current API key.</p>
    </div>
  </div>
</div>
