<% 
  layout = 'layout';
  pageTitle = 'Documents';
  extraScripts = ['documents_enhanced.js', 'shared.js'];
%>

<!-- TABS -->
<div class="tabs">
  <button id="tab-upload" class="tab active" onclick="switchDocTab('upload')">Upload</button>
  <button id="tab-library" class="tab" onclick="switchDocTab('library')">Library</button>
</div>

<!-- TAB: Upload -->
<div id="tab-content-upload">
  <div class="card">
    <form id="upload-form" enctype="multipart/form-data">
      <div class="file-upload" id="upload-area" onclick="document.getElementById('file-input').click()">
        <input type="file" id="file-input" multiple accept=".txt,.pdf,.doc,.docx" style="display: none;">
        <svg class="file-upload-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
        </svg>
        <div class="file-upload-text">
          <strong>Click to upload</strong> or drag and drop<br>
          <span class="text-xs text-muted">TXT, PDF, DOC, DOCX Â· Multiple files supported</span>
        </div>
      </div>
      
      <!-- Selected Files Preview -->
      <div id="selected-files" class="mt-4" style="display: none;">
        <div class="card-header">
          <span class="font-medium" id="files-count">Selected Files</span>
          <button type="button" onclick="clearAllFiles()" class="btn btn-tertiary btn-sm">Clear All</button>
        </div>
        <div id="files-list" class="flex flex-col gap-2 mt-3">
          <!-- Files will be listed here -->
        </div>
        <div class="flex gap-3 mt-4">
          <button type="button" onclick="uploadAllFiles()" class="btn btn-primary flex-1">
            <span id="upload-btn-text">Upload All</span>
          </button>
          <button type="button" onclick="clearAllFiles()" class="btn btn-tertiary flex-1">Cancel</button>
        </div>
      </div>
    </form>
  </div>
  
  <!-- Upload Progress Section -->
  <div id="upload-progress-section" class="mt-4" style="display: none;">
    <div class="card">
      <div class="card-header">
        <span class="font-medium">Upload Progress</span>
        <span id="upload-summary" class="text-sm text-muted">0/0 completed</span>
      </div>
      <div id="upload-progress-list" class="flex flex-col gap-3 mt-3">
        <!-- Individual file progress items will appear here -->
      </div>
    </div>
  </div>
</div>

<!-- TAB: Library -->
<div id="tab-content-library" style="display: none;">
  <div class="card">
    <div class="card-header">
      <span class="font-medium">Document Library</span>
      <button class="btn btn-tertiary btn-sm" onclick="loadDocuments()">Refresh</button>
    </div>
    <div id="documents-list" class="flex flex-col gap-3">
      <p class="text-center text-muted">Loading documents...</p>
    </div>
  </div>
</div>
